/* JQuery wipSlider Plugin
 * @author: Pablo Cazorla
 * @e-mail: pablo.cazorla@huddle.com.ar
 * @date: 10/09/2013
 */
 (function(d){d.fn.wipSlider=function(v){return this.each(function(){var c=d(this),b=c.attr("data")||"";try{b=jQuery.parseJSON('{"'+b.split("=").join('":').split("&").join(',"')+"}")}catch(v){b={}}var f=d.extend({duration:2500,transition:500,initial:0,autoplay:!0},b),k=c.find(">div"),e=f.initial,l=k.length,m=!1,n=null,g=!1,q="100%",w=function(){q=c.find("img").eq(0).width();c.css("max-width",q).addClass("wipSliderActive").append('<div class="wipCtrl"><div class="wipBtn"><span></span><span></span></div><div class="wipRage"><span></span></div></div>');var b=c.find(".wipBtn"),h=c.find(".wipRage"),d=h.find("span"),r=100/l,t=function(a){m||a==e||(m=!0,k.css("z-index","10").eq(e).css("z-index","11"),k.eq(a).css({"z-index":"12",opacity:"0"}).animate({opacity:"1"},f.transition,function(){m=!1;e=a}),d.css("width",r*(a+1)+"%"))},p=function(){n=setInterval(function(){var a=e+1;a>=l&&(a=0);t(a)},f.duration);b.addClass("play");g=!0},u=function(){null!=n&&clearInterval(n);b.removeClass("play");g=!1};d.css("width",r*(e+1)+"%");f.autoplay&&p();b.click(function(){g?u():p()});h.click(function(a){a=Math.round((a.pageX-h.offset().left)*(l-1)/h.width());a!=e&&(t(a),g&&(u(),p()))})},b=new Image;b.src=c.find("img").eq(0).attr("src");b.onload=function(){w()}})}})(jQuery);